#!/usr/bin/env bash

set -euo pipefail

NODE_COUNT="${1:-2}"
RESET_MODE="${2:-}"

echo "=================================================="
echo "LN-AI FULL SYSTEM SHUTDOWN"
echo "=================================================="

###############################################################################
# AGENT
###############################################################################

./scripts/shutdown/agent_shutdown.sh

###############################################################################
# CONTROL PLANE
###############################################################################

./scripts/shutdown/control_plane_shutdown.sh

###############################################################################
# INFRA
###############################################################################

./scripts/shutdown/infra_shutdown.sh "$NODE_COUNT" "$RESET_MODE"

echo "=================================================="
echo "SYSTEM SHUTDOWN COMPLETE"
echo "=================================================="
